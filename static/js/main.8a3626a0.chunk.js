(this["webpackJsonptetris-typescript"]=this["webpackJsonptetris-typescript"]||[]).push([[0],{20:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(0),c=n(9),a=n.n(c),i=(n(20),n(2)),u=(n(8),n(10));function s(){var t=Object(u.a)(["\n\n  background: rgba(",");\n  border: 0.5px solid #242121;\n \n"]);return s=function(){return t},t}var f=n(11).a.div(s(),(function(t){return t.color})),l={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80,227,230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36,95,223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223,173,36"},O:{shape:[["O","O"],["O","O"]],color:"173,120,230"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48,211,56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132,61,198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"81,173,230"}},j=function(){var t="IJLOSTZ",e=t[Math.floor(Math.random()*t.length)];return l[e]},p=function(t){var e=t.blocktype;return Object(r.jsx)(f,{color:l[e].color})},b=function(t){var e=t.stage;return Object(r.jsx)("div",{className:"StyledStage",children:e.map((function(t){return t.map((function(t){return Object(r.jsx)(p,{blocktype:t[0]})}))}))})},O=function(){for(var t=new Array(20),e=0;e<t.length;e++)t[e]=new Array(12).fill([0,"clear"]);return t},d=function(t,e,n,r){for(var o=0;o<t.tetromino.length;o+=1)for(var c=0;c<t.tetromino[o].length;c+=1)if(0!==t.tetromino[o][c]&&(!e[o+t.pos.y+r]||!e[o+t.pos.y+r][c+t.pos.x+n]||"clear"!==e[o+t.pos.y+r][c+t.pos.x+n][1]))return!0;return!1},h=n(6),v=function(t,e){var n=Object(o.useState)(O()),r=Object(i.a)(n,2),c=r[0],a=r[1],u=Object(o.useState)(0),s=Object(i.a)(u,2),f=s[0],l=s[1];return Object(o.useEffect)((function(){l(0);var n=function(n){for(var r=n.map((function(t){return t.map((function(t){return"clear"===t[1]?[0,"clear"]:t}))})),o=0;o<t.tetromino.length;o++)for(var c=0;c<t.tetromino[0].length;c++)0!==t.tetromino[o][c]&&(r[o+t.pos.y][c+t.pos.x]=[t.tetromino[o][c],"".concat(t.collided?"merged":"clear")]);return t.collided?(e(),function(t){return t.reduce((function(e,n){return-1===n.findIndex((function(t){return 0===t[0]}))?(l((function(t){return t+1})),e.unshift(new Array(t[0].length).fill([0,"clear"])),e):(e.push(n),e)}),[])}(r)):r};a((function(t){return n(t)}))}),[t]),[c,a,f]};var x=function(){var t,e,n=Object(o.useState)(!1),c=Object(i.a)(n,2),a=c[0],u=c[1],s=Object(o.useState)(0),f=Object(i.a)(s,2),p=f[0],x=f[1],m=function(){var t=Object(o.useState)({pos:{x:0,y:0},tetromino:l[0].shape,collided:!1}),e=Object(i.a)(t,2),n=e[0],r=e[1];return[n,function(t,e,n){r((function(r){return Object(h.a)(Object(h.a)({},r),{},{pos:{x:r.pos.x+=t,y:r.pos.y+=e},collided:n})}))},function(){r({pos:{x:4,y:0},tetromino:j().shape,collided:!1})},function(t){var e,o=JSON.parse(JSON.stringify(n));for(o.tetromino=(e=o.tetromino).map((function(t,n){return e.map((function(t){return t[n]}))})).map((function(t){return t.reverse()}));d(o,t,0,0);)if(o.pos.x<0)o.pos.x++;else{if(!(o.pos.x>=9))return;o.pos.x--}r(o)}]}(),y=Object(i.a)(m,4),S=y[0],g=y[1],I=y[2],k=y[3],J=v(S,I),T=Object(i.a)(J,3),N=T[0],E=T[1],w=function(t){var e=Object(o.useState)(0),n=Object(i.a)(e,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){c((function(e){return e+t}))}),[t]),[r,c]}(T[2]),L=Object(i.a)(w,2),Z=L[0],A=(L[1],function(t){d(S,N,t,0)||g(t,0)}),C=function(){d(S,N,0,1)?(S.pos.y<1&&(x(0),u(!0)),g(0,0,!0)):g(0,1,!1)};return t=function(){C()},e=p,Object(o.useEffect)((function(){if(0!==e){var n=setInterval(t,e);return function(){clearInterval(n)}}})),Object(r.jsxs)("div",{className:"StyledTetris",role:"button",tabIndex:0,onKeyDown:function(t){return function(t){a||(37===t.keyCode?A(-1):39===t.keyCode?A(1):40===t.keyCode?C():38===t.keyCode&&k(N))}(t)},children:[Object(r.jsx)("div",{className:"header",children:"TETRIS"}),Object(r.jsxs)("div",{className:"left",children:[" ",Object(r.jsx)(b,{stage:N})]}),Object(r.jsxs)("div",{className:"right",children:[Object(r.jsx)("button",{onClick:function(){E(O()),x(1e3),I(),u(!1)},children:"Start"}),Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),"Score: ",Z,Object(r.jsx)("br",{}),a?"GAMEOVER\ud83d\ude1e":""]})]})},m=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(x,{})})};a.a.render(Object(r.jsx)(m,{}),document.getElementById("root"))},8:function(t,e,n){}},[[23,1,2]]]);
//# sourceMappingURL=main.8a3626a0.chunk.js.map