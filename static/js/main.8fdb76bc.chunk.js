(this["webpackJsonptetris-typescript"]=this["webpackJsonptetris-typescript"]||[]).push([[0],{20:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(0),c=n(9),a=n.n(c),i=(n(20),n(2)),u=(n(8),n(10));function s(){var t=Object(u.a)(["\n\n  background: rgba(",");\n  border: 0.5px solid #242121;\n \n"]);return s=function(){return t},t}var l=n(11).a.div(s(),(function(t){return t.color})),f={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80,227,230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36,95,223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223,173,36"},O:{shape:[["O","O"],["O","O"]],color:"173,120,230"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48,211,56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132,61,198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"81,173,230"}},j=function(){var t="IJLOSTZ",e=t[Math.floor(Math.random()*t.length)];return f[e]},b=function(t){var e=t.blocktype;return Object(r.jsx)(l,{color:f[e].color})},p=function(t){var e=t.stage;return Object(r.jsx)("div",{className:"StyledStage",children:e.map((function(t){return t.map((function(t){return Object(r.jsx)(b,{blocktype:t[0]})}))}))})},O=function(){for(var t=new Array(20),e=0;e<t.length;e++)t[e]=new Array(12).fill([0,"clear"]);return t},d=function(t,e,n,r){for(var o=0;o<t.tetromino.length;o+=1)for(var c=0;c<t.tetromino[o].length;c+=1)if(0!==t.tetromino[o][c]&&(!e[o+t.pos.y+r]||!e[o+t.pos.y+r][c+t.pos.x+n]||"clear"!==e[o+t.pos.y+r][c+t.pos.x+n][1]))return!0;return!1},h=n(6),v=function(){var t=Object(o.useState)({pos:{x:0,y:0},tetromino:f[0].shape,collided:!1}),e=Object(i.a)(t,2),n=e[0],r=e[1];return[n,function(t,e,n){r((function(r){return Object(h.a)(Object(h.a)({},r),{},{pos:{x:r.pos.x+=t,y:r.pos.y+=e},collided:n})}))},function(){r({pos:{x:4,y:0},tetromino:j().shape,collided:!1})},function(t){var e,o=JSON.parse(JSON.stringify(n));o.tetromino=(e=o.tetromino).map((function(t,n){return e.map((function(t){return console.log(t[n]),t[n]}))})).map((function(t){return t.reverse()})),d(o,t,0,0)||r(o)}]},m=function(t,e){var n=Object(o.useState)(O()),r=Object(i.a)(n,2),c=r[0],a=r[1],u=Object(o.useState)(0),s=Object(i.a)(u,2),l=s[0],f=s[1];return Object(o.useEffect)((function(){f(0);var n=function(n){for(var r=n.map((function(t){return t.map((function(t){return"clear"===t[1]?[0,"clear"]:t}))})),o=0;o<t.tetromino.length;o++)for(var c=0;c<t.tetromino[0].length;c++)0!==t.tetromino[o][c]&&(r[o+t.pos.y][c+t.pos.x]=[t.tetromino[o][c],"".concat(t.collided?"merged":"clear")]);return t.collided?(e(),function(t){return t.reduce((function(e,n){return-1===n.findIndex((function(t){return 0===t[0]}))?(f((function(t){return t+1})),e.unshift(new Array(t[0].length).fill([0,"clear"])),e):(e.push(n),e)}),[])}(r)):r};a((function(t){return n(t)}))}),[t]),[c,a,l]};var x=function(){var t,e,n=Object(o.useState)(!1),c=Object(i.a)(n,2),a=c[0],u=c[1],s=Object(o.useState)(0),l=Object(i.a)(s,2),f=l[0],j=l[1],b=v(),h=Object(i.a)(b,4),x=h[0],y=h[1],S=h[2],g=h[3],I=m(x,S),k=Object(i.a)(I,3),J=k[0],T=k[1],N=function(t){var e=Object(o.useState)(0),n=Object(i.a)(e,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){c((function(e){return e+t}))}),[t]),[r,c]}(k[2]),E=Object(i.a)(N,2),w=E[0],L=(E[1],function(t){d(x,J,t,0)||y(t,0)}),Z=function(){d(x,J,0,1)?(x.pos.y<1&&(j(0),u(!0)),y(0,0,!0)):y(0,1,!1)};return t=function(){Z()},e=f,Object(o.useEffect)((function(){if(0!==e){var n=setInterval(t,e);return function(){clearInterval(n)}}})),Object(r.jsxs)("div",{className:"StyledTetris",role:"button",tabIndex:0,onKeyDown:function(t){return function(t){a||(37===t.keyCode?L(-1):39===t.keyCode?L(1):40===t.keyCode?Z():38===t.keyCode&&g(J))}(t)},children:[Object(r.jsx)("div",{className:"header",children:"TETRIS"}),Object(r.jsxs)("div",{className:"left",children:[" ",Object(r.jsx)(p,{stage:J})]}),Object(r.jsxs)("div",{className:"right",children:[Object(r.jsx)("button",{onClick:function(){T(O()),j(1e3),S(),u(!1)},children:"Start"}),Object(r.jsx)("br",{})," ",Object(r.jsx)("br",{}),"Score: ",w,Object(r.jsx)("br",{}),a?"GAMEOVER\ud83d\ude1e":""]})]})},y=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(x,{})})};a.a.render(Object(r.jsx)(y,{}),document.getElementById("root"))},8:function(t,e,n){}},[[23,1,2]]]);
//# sourceMappingURL=main.8fdb76bc.chunk.js.map